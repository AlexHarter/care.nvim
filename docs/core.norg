@document.meta
title: Core
description: Type description of neocomplete.nvim source
authors: [
    max397574
]
categories: [
    docs,
    types
]
created: 2023-11-15T17:42:46+0100
updated: 2024-07-10T21:06:51+0100
tangle: {
    languages: {
        lua: ../lua/neocomplete/types/core.lua
    }
    scope: tagged
    delimiter: none
}
version: 1.1.1
@end

* General
  This module is for the core of neocomplete. There all comes together with the menu being opened
  and the completion triggered.
  #tangle
  @code lua
  --- The core module of neocomplete
  ---@class neocomplete.core
  @end

** New
   Use this function to create a new instance.
   #tangle
   @code lua
   --- Create a new instance of the core
   ---@field new fun(): neocomplete.core
   @end

* Methods
** Complete
   This function starts the completion. It goes through all the sources, triggers them (completion
   or sorting) and opens the menu with the result.
   #tangle
   @code lua
   --- Complete
   ---@field complete fun(self: neocomplete.core, reason: neocomplete.completionReason?): nil
   @end

** On Change
   This function is invoked on every text change. It updates the context field and triggers
   completion if it changed.
   #tangle
   @code lua
   --- The function that gets invoked when the text changes
   ---@field on_change fun(neocomplete.core): nil
   @end

** Block
   The `block` method can be used to temporarily disable neocomplete. It returns a function which is
   used to unblock it again.
   This is used for the `insert` selection behavior where you don't want to get new completions when
   changing the text.
   #tangle
   @code lua
   --- Block neocomplete temporarily
   --- Call return value to unblock
   ---@field block fun(neocomplete.core): fun(): nil
   @end

** Setup
   The setup function is used to setup neocomplete so it will actually provide autocompletion when
   typing by setting up an autocommand.
   #tangle
   @code lua
   --- Setup core (for now autocommands)
   ---@field setup fun(self: neocomplete.core): nil
   @end

* Fields
** Context
   This is used to store the current context. There is always a new one created in `on_change` and
   compared to see if it changed.
   #tangle
   @code lua
   --- Context instance of the core
   ---@field context neocomplete.context
   @end

** Menu
   In this field a menu instance which is used in core is stored.
   #tangle
   @code lua
   --- Menu instance of the core
   ---@field menu neocomplete.menu
   @end

** Blocked
   This field is used by the {** Block} method. It just completely disables autocompletion when set
   to true.
   #tangle
   @code lua
   --- Block autocompletion
   ---@field blocked boolean
   @end

** Last opened at
   This variable is used to determine where a new completion window was opened for the last time.
   This is used to determine when to reopen the completion window.
   #tangle
   @code lua
   --- Column where a new menu was opened the last time
   ---@field last_opened_at integer
   @end
